<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الحسابات - نظام إدارة الأعمال</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <i class="fas fa-chart-line"></i>
                <span>نظام الأعمال</span>
            </div>
            <button class="sidebar-toggle" id="sidebarToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        
        <nav class="sidebar-nav">
            <a href="dashboard.html" class="nav-item"><i class="fas fa-home"></i><span>لوحة التحكم</span></a>
            <a href="sales.html" class="nav-item"><i class="fas fa-shopping-cart"></i><span>المبيعات</span></a>
            <a href="purchases.html" class="nav-item"><i class="fas fa-truck"></i><span>المشتريات</span></a>
            <a href="inventory.html" class="nav-item"><i class="fas fa-warehouse"></i><span>المخازن</span></a>
            <a href="accounts.html" class="nav-item active"><i class="fas fa-calculator"></i><span>الحسابات</span></a>
            <a href="customers.html" class="nav-item"><i class="fas fa-users"></i><span>العملاء</span></a>
            <a href="products.html" class="nav-item"><i class="fas fa-box"></i><span>المنتجات</span></a>
            <a href="reports.html" class="nav-item"><i class="fas fa-chart-bar"></i><span>التقارير</span></a>
            <a href="settings.html" class="nav-item"><i class="fas fa-cog"></i><span>الإعدادات</span></a>
        </nav>
        
        <div class="sidebar-footer">
            <a href="#" class="nav-item" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i>
                <span>تسجيل الخروج</span>
            </a>
        </div>
    </aside>
    
    <!-- Main Content -->
    <main class="main-content">
        <!-- Top Bar -->
        <header class="topbar">
            <div class="topbar-left">
                <button class="mobile-toggle" id="mobileToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <h2>إدارة الحسابات</h2>
            </div>
            
            <div class="topbar-right">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="بحث...">
                </div>
                
                <button class="notification-btn">
                    <i class="fas fa-bell"></i>
                    <span class="badge">5</span>
                </button>
                
                <div class="user-menu">
                    <img src="https://ui-avatars.com/api/?name=Admin&background=4f46e5&color=fff" alt="User">
                    <div class="user-info">
                        <span class="user-name">المدير</span>
                        <span class="user-role">مدير النظام</span>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Accounts Content -->
        <div class="page-content">
            <div class="page-header">
                <div class="page-title">
                    <h1>الحسابات المالية</h1>
                    <p>إدارة ومراقبة الحسابات والمعاملات المالية</p>
                </div>
                <button class="btn-primary" id="newTransactionBtn">
                    <i class="fas fa-plus"></i>
                    معاملة جديدة
                </button>
            </div>
            
            <!-- Financial Summary -->
            <div class="stats-row">
                <div class="stat-box green">
                    <i class="fas fa-arrow-up"></i>
                    <div>
                        <h4>إجمالي الإيرادات</h4>
                        <p id="totalRevenue">0 ج.م</p>
                    </div>
                </div>
                <div class="stat-box red">
                    <i class="fas fa-arrow-down"></i>
                    <div>
                        <h4>إجمالي المصروفات</h4>
                        <p id="totalExpenses">0 ج.م</p>
                    </div>
                </div>
                <div class="stat-box blue">
                    <i class="fas fa-wallet"></i>
                    <div>
                        <h4>صافي الربح</h4>
                        <p id="netProfit">0 ج.م</p>
                    </div>
                </div>
                <div class="stat-box purple">
                    <i class="fas fa-university"></i>
                    <div>
                        <h4>الرصيد البنكي</h4>
                        <p id="bankBalance">0 ج.م</p>
                    </div>
                </div>
            </div>
            
            <!-- Tabs -->
            <div class="tabs">
                <button class="tab-btn active" data-tab="transactions">المعاملات</button>
                <button class="tab-btn" data-tab="accounts">دليل الحسابات</button>
                <button class="tab-btn" data-tab="receivables">المدينون</button>
                <button class="tab-btn" data-tab="payables">الدائنون</button>
            </div>
            
            <!-- Transactions Tab -->
            <div class="tab-content active" id="transactionsTab">
                <div class="filters-section">
                    <div class="filter-group">
                        <label>من تاريخ</label>
                        <input type="date" id="transDateFrom">
                    </div>
                    <div class="filter-group">
                        <label>إلى تاريخ</label>
                        <input type="date" id="transDateTo">
                    </div>
                    <div class="filter-group">
                        <label>نوع المعاملة</label>
                        <select id="transTypeFilter">
                            <option value="">الكل</option>
                            <option value="income">إيراد</option>
                            <option value="expense">مصروف</option>
                            <option value="transfer">تحويل</option>
                        </select>
                    </div>
                    <button class="btn-secondary" id="applyTransFilters">
                        <i class="fas fa-filter"></i>
                        تطبيق
                    </button>
                </div>
                
                <div class="content-card">
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>التاريخ</th>
                                    <th>رقم المعاملة</th>
                                    <th>النوع</th>
                                    <th>الحساب</th>
                                    <th>الوصف</th>
                                    <th>المدين</th>
                                    <th>الدائن</th>
                                    <th>الإجراءات</th>
                                </tr>
                            </thead>
                            <tbody id="transactionsTableBody">
                                <!-- Data will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Accounts Tab -->
            <div class="tab-content" id="accountsTab">
                <div class="page-header">
                    <div class="page-title">
                        <h3>دليل الحسابات</h3>
                    </div>
                    <button class="btn-primary" id="newAccountBtn">
                        <i class="fas fa-plus"></i>
                        حساب جديد
                    </button>
                </div>
                
                <div class="content-card">
                    <div class="accounts-tree" id="accountsTree">
                        <!-- Accounts tree will be inserted here -->
                    </div>
                </div>
            </div>
            
            <!-- Receivables Tab -->
            <div class="tab-content" id="receivablesTab">
                <div class="content-card">
                    <h3>حسابات المدينين (العملاء)</h3>
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>اسم العميل</th>
                                    <th>إجمالي المبيعات</th>
                                    <th>المدفوع</th>
                                    <th>المتبقي</th>
                                    <th>آخر دفعة</th>
                                    <th>الإجراءات</th>
                                </tr>
                            </thead>
                            <tbody id="receivablesTableBody">
                                <!-- Data will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Payables Tab -->
            <div class="tab-content" id="payablesTab">
                <div class="content-card">
                    <h3>حسابات الدائنين (الموردين)</h3>
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>اسم المورد</th>
                                    <th>إجمالي المشتريات</th>
                                    <th>المدفوع</th>
                                    <th>المتبقي</th>
                                    <th>آخر دفعة</th>
                                    <th>الإجراءات</th>
                                </tr>
                            </thead>
                            <tbody id="payablesTableBody">
                                <!-- Data will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- New Transaction Modal -->
    <div class="modal" id="transactionModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>معاملة مالية جديدة</h2>
                <button class="close-modal" id="closeTransactionModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <form id="transactionForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label>التاريخ</label>
                            <input type="date" id="transDate" required>
                        </div>
                        <div class="form-group">
                            <label>نوع المعاملة</label>
                            <select id="transType" required>
                                <option value="">اختر النوع</option>
                                <option value="income">إيراد</option>
                                <option value="expense">مصروف</option>
                                <option value="transfer">تحويل</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>الحساب</label>
                        <select id="transAccount" required>
                            <option value="">اختر الحساب</option>
                            <option value="1">الصندوق</option>
                            <option value="2">البنك - الحساب الجاري</option>
                            <option value="3">المبيعات</option>
                            <option value="4">المشتريات</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>المبلغ</label>
                        <input type="number" id="transAmount" step="0.01" min="0" required>
                    </div>
                    
                    <div class="form-group">
                        <label>الوصف</label>
                        <textarea id="transDescription" rows="3" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>المرجع</label>
                        <input type="text" id="transReference">
                    </div>
                    
                    <div class="modal-footer">
                        <button type="button" class="btn-secondary" id="cancelTransactionBtn">إلغاء</button>
                        <button type="submit" class="btn-primary">حفظ المعاملة</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Payment Modal -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>تسجيل دفعة</h2>
                <button class="close-modal" id="closePaymentModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <form id="paymentForm">
                    <div class="form-group">
                        <label>المبلغ المستحق</label>
                        <input type="text" id="dueAmount" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label>المبلغ المدفوع</label>
                        <input type="number" id="paidAmount" step="0.01" min="0" required>
                    </div>
                    
                    <div class="form-group">
                        <label>طريقة الدفع</label>
                        <select id="paymentMethod" required>
                            <option value="cash">نقدي</option>
                            <option value="bank">تحويل بنكي</option>
                            <option value="check">شيك</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>التاريخ</label>
                        <input type="date" id="paymentDate" required>
                    </div>
                    
                    <div class="form-group">
                        <label>ملاحظات</label>
                        <textarea id="paymentNotes" rows="3"></textarea>
                    </div>
                    
                    <div class="modal-footer">
                        <button type="button" class="btn-secondary" id="cancelPaymentBtn">إلغاء</button>
                        <button type="submit" class="btn-primary">حفظ الدفعة</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <script src="js/app.js"></script>
    <script src="js/accounts.js"></script>
</body>
</html>
